{"version":3,"file":"helpers.js","sourceRoot":"","sources":["../src/helpers.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,2CAA4B;AAE5B,sDAA6B;AAE7B,8DAA8D;AAC9D,MAAM,GAAG,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAA;AAEtC,SAAS,UAAU,CAAC,OAAe;IAC/B,OAAO,CAAC,KAAK,CAAC,UAAU,OAAO,EAAE,CAAC,CAAA;IAClC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AACnB,CAAC;AAED,SAAgB,YAAY,CAAI,MAAS;IACrC,OAAO,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,GAAG,IAAI,CAAA;AACpD,CAAC;AAFD,oCAEC;AAED,SAAgB,SAAS;IACrB,IAAI,iBAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;QACtB,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,iBAAO,CAAC,IAAI,CAAC,sBAAsB,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAA;QAClF,MAAM,EAAE,MAAM,EAAE,aAAa,EAAE,GAAG,iBAAO,CAAC,IAAI,CAAC,+BAA+B,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAA;QACjG,MAAM,MAAM,GAAG,CAAC,OAAO,IAAI,aAAa,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAA;QAE3D,IAAI,MAAM,EAAE;YACR,OAAO,GAAG,MAAM,KAAK,GAAG,CAAC,IAAI,GAAG,CAAA;SACnC;KACJ;IAED,OAAO,GAAG,CAAC,IAAI,CAAA;AACnB,CAAC;AAZD,8BAYC;AAED;;;;GAIG;AACH,SAAsB,eAAe,CAAC,OAAwB;;QAC1D,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;YACpC,UAAU,CAAC,+BAA+B,CAAC,CAAA;SAC9C;QACD,IAAI,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,EAAE;YAClC,UAAU,CAAC,qCAAqC,CAAC,CAAA;SACpD;QAED,wDAAwD;QACxD,IAAI,CAAC,iBAAO,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,oBAAoB,CAAC,EAAE;YACnD,UAAU,CAAC,iCAAiC,CAAC,CAAA;SAChD;QAED,kDAAkD;QAClD,IAAI,CAAC,iBAAO,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,eAAe,CAAC,EAAE;YAC9C,IAAI,OAAO,CAAC,MAAM,EAAE;gBAChB,mDAAmD;gBACnD,kBAAkB;gBAClB,UAAU,CAAC,0BAA0B,CAAC,CAAA;aACzC;iBAAM;gBACH,0CAA0C;gBAC1C,6BAA6B;gBAC7B,MAAM,iBAAO,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAA;aACnE;SACJ;IACL,CAAC;CAAA;AAzBD,0CAyBC","sourcesContent":["import * as path from \"path\"\r\nimport { CommanderStatic } from \"commander\"\r\nimport shelljs from \"shelljs\"\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-var-requires\r\nconst pkg = require('../package.json')\r\n\r\nfunction throwError(message: string): void {\r\n    console.error(`Error: ${message}`)\r\n    process.exit(1)\r\n}\r\n\r\nexport function prettifyJson<T>(object: T): string {\r\n    return JSON.stringify(object, null, \"\\t\") + \"\\n\"\r\n}\r\n\r\nexport function getAuthor(): string {\r\n    if (shelljs.which('git')) {\r\n        const { stdout: gitName } = shelljs.exec('git config user.name', { silent: true })\r\n        const { stdout: gitGlobalName } = shelljs.exec('git config --global user.name', { silent: true })\r\n        const author = (gitName || gitGlobalName).replace(\"\\n\", \"\")\r\n\r\n        if (author) {\r\n            return `${author} (${pkg.name})`\r\n        }\r\n    }\r\n\r\n    return pkg.name\r\n}\r\n\r\n/**\r\n * Validate input options\r\n * if not valid exit with code 1\r\n * @param {CommanderStatic} program\r\n */\r\nexport async function programValidate(program: CommanderStatic): Promise<void> {\r\n    if (!program.import && !program.export) {\r\n        throwError('Import/Export command missing')\r\n    }\r\n    if (program.import && program.export) {\r\n        throwError(\"Can't choose both Import and Export\")\r\n    }\r\n\r\n    // Check if path exist for translation-assets-dir option\r\n    if (!shelljs.test('-e', program.translationAssetsDir)) {\r\n        throwError(\"Wrong path to locales directory\")\r\n    }\r\n\r\n    // Check if path exist for translation-file option\r\n    if (!shelljs.test('-e', program.translationFile)) {\r\n        if (program.import) {\r\n            // throw an error if we want to import translations\r\n            // from excel file\r\n            throwError(\"Wrong path to excel file\")\r\n        } else {\r\n            // create directories if we want to export\r\n            // translations to excel file\r\n            await shelljs.mkdir('-p', path.dirname(program.translationFile))\r\n        }\r\n    }\r\n}\r\n"]}